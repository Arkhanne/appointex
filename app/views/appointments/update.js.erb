<% if @appointment.new_record? %>
  var td = document.getElementById('schedule_<%= @appointment.date.wday %>_<%= @appointment.date.hour %>');
  td.classList.remove('self-appointment');
  td.classList.add('active');
  td.innerHTML = "<%= j(render partial: 'appointments/form', locals: { appointment: @appointment }) %>";
<% else %>
  <% @appointment.errors.full_messages.each do |message| %>
    alert("<%= message %>");
  <% end %>
<% end %>